package cmsz.rd.opentest.cmd;


import java.io.IOException;
import java.nio.file.Path;

/**
 * Created by admin on 2017/4/13.
 */
public class Shell {
    public static int exec(String cmdline) {
        CmdProcess cmdProcess = new DefaultCmdProcess(cmdline);
        cmdProcess.start();

        int res = cmdProcess.waitFor();
        cmdProcess.destroy();
        return res;
    }

    public static CmdProcess deamon(String cmdline) {
        CmdProcess cmdProcess = new DefaultCmdProcess(cmdline);
        cmdProcess.start();

        return cmdProcess;
    }

    public static int exec(String cmdline, Checker checker) {
        CmdProcess cmdProcess = new DefaultCmdProcess(cmdline);
        cmdProcess.addChecker(checker);
            cmdProcess.start();

        int res = cmdProcess.waitFor();
        cmdProcess.destroy();
        cmdProcess.detectCheckers();
        if(res!=0){
            throw new RuntimeException("exit code is "+ res+" , cmdline :"+ cmdline);
        }
        return res;
    }
}
