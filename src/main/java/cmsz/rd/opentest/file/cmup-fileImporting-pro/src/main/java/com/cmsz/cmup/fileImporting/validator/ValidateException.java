package com.cmsz.cmup.fileImporting.validator;

import java.util.LinkedList;
import java.util.List;

public class ValidateException extends Exception {

	/**
	 * 序列号
	 */
	private static final long serialVersionUID = -4775664195116990808L;

	public static String CODE_FAILED = "F102"; // 通用错误， 验证失败
	public static String EMSG_FAILED = "validate failed(通用错误， 验证失败)";

	public static String CODE_REPEATED = "F126"; // 固定行，出现一次以上
	public static String EMSG_REPEATED = "fix row repeated(固定行，出现一次以上)";

	public static String CODE_POSITION = "F102"; // 固定行，行号错误
	public static String EMSG_POSITION = "fix row position is not right(固定行，行号错误)";

	public static String CODE_NOFILTER = "F124"; // 匹配不到校验器
	public static String EMSG_NOFILTER = "there is not filter to handle, the initial field may not be correct, please check it up...(匹配不到校验器，或为数据行首字段不匹配，请检查...)";

	public static String CODE_NOTYPE = "F102"; // 校验方式不对或不存在
	public static String EMSG_NOTYPE = "the filter type is wrong(校验方式不对或不存在)";

	public static String CODE_NOMATCH = "F124"; // 正则表达式或规则不匹配
	public static String EMSG_NOMATCH = "field not match regx or rules(正则表达式或规则不匹配)";

	public static String CODE_LENGTH = "F124"; // 长度不正确
	public static String EMSG_LENGTH = "the length is not right(长度不正确)";

	public static String CODE_FIELDSUM = "F128"; // 数据字段数量不正确
	public static String EMSG_FIELDSUM = "the quantity of fields is wrong(数据字段数量不正确)";

	public static String CODE_DATASUM = "F203"; // 数据条数不正确(文件头记录总数与文件体不一致)
	public static String EMSG_CODE_DATASUM = "the quantity of data is wrong(数据条数不正确(文件头记录总数与文件体不一致))";

	public static String CODE_FILEHEADER = "F105"; // 文件头校验不通过
	public static String EMSG_CODE_FILEHEADER = "the file header is wrong(文件头校验不通过)";

	public static String CODE_FILEEND = "F004"; // 文件尾校验不通过
	public static String EMSG_CODE_FILEEND = "the end-of-file is wrong(文件尾校验不通过)";

	public static String CODE_REPEATDATA = "F126"; // 文件存在重复记录
	public static String EMSG_CODE_REPEATDATA = "the data is repeated(文件存在重复记录)";

	public static String CODE_BLANKLINE = "F127";// 文件记录中存在空行
	public static String EMSG_BLANKLINE = "there is a blank line between the data rows(文件存在空记录行)";

	private Section section;
	private String code;
	private String errmsg;
	private transient List<ValidateException> list = null;

	public ValidateException(Section section, String code, String errmsg) {
		this.section = section;
		this.code = code;
		this.errmsg = errmsg;
	}

	public void append(ValidateException ve) {
		if (list == null) {
			list = new LinkedList<ValidateException>();
		}
		list.add(ve);
	}

	public List<ValidateException> trace() {
		return this.list;
	}

	public Section getSection() {
		return section;
	}

	public void setSection(Section section) {
		this.section = section;
	}

	public String getCode() {
		return code;
	}

	public void setCode(String code) {
		this.code = code;
	}

	public String getErrmsg() {
		return errmsg;
	}

	public void setErrmsg(String errmsg) {
		this.errmsg = errmsg;
	}

	public String toString() {
		StringBuilder sb = new StringBuilder();
		sb.append("ValidateException:{");
		if (this.section != null) {
			sb.append("section:position=").append(this.section.getPosition());
			sb.append(",content=").append(this.section.getContent()).append(",");
		}
		sb.append("code:").append(this.code).append(",msg:").append(this.errmsg);
		sb.append("}");
		return sb.toString();
	}

}
