<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.cmsz.cmup.fileImporting.dao.FileDataDAO">
	<delete id="deleteStoredFileData" parameterType="java.util.Map">
		delete from
		${FILE_DATA_TABLE} where
		${SETTLE_DATE_FIELD} = #{settleDate}
		and MERCHANT_TYPE = #{FILE_MERCHANT}
		<if test="province != ''">and PROVINCE = #{province}</if>
		<if test="FILE_DATA_TABLE == 'THIRDPAY_DATA_PRO'">and TRANSACTION_TYPE = #{FILE_TYPE}</if>
	</delete>
	
	<update id="truncateSubpatirion" parameterType="java.util.Map">
		alter table ${FILE_DATA_TABLE} truncate subpartition ${subpartition} update global indexes
	</update>
</mapper>